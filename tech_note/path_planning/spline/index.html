
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
  <meta name="google-site-verification" content="SeSOftTMkIhBvAlq5IccGkYue9UkfSEwb_90juCN_rQ" />
  
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="cpp_robotics: A C++ library for robotics">
      
      
        <meta name="author" content="Takumi Odashima">
      
      
        <link rel="canonical" href="https://kotakku.github.io/cpp_robotics/tech_note/path_planning/spline/">
      
      
        <link rel="prev" href="../dubins_path/">
      
      
        <link rel="next" href="../../algorithm/poly_lerp/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    

    
      
        <title>スプライン曲線 - cpp_robotics</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href="../../.." title="cpp_robotics" class="md-header__button md-logo" aria-label="cpp_robotics" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M320 0c17.7 0 32 14.3 32 32v64h120c39.8 0 72 32.2 72 72v272c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72h120V32c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zM264 256a40 40 0 1 0-80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224h16v192H48c-26.5 0-48-21.5-48-48v-96c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48h-16V224h16z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            cpp_robotics
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              スプライン曲線
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="検索">
        
        <button type="reset" class="md-search__icon md-icon" title="クリア" aria-label="クリア" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Kotakku/cpp_robotics" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Kotakku/cpp_robotics
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="タブ" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  概要

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="/cpp_robotics/doxybook/Namespaces/namespacecpp__robotics/" class="md-tabs__link">
        
  
    
  
  API

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../example/hello_world/" class="md-tabs__link">
          
  
  プログラム例

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../system/transfer_function/" class="md-tabs__link">
          
  
  技術資料

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="cpp_robotics" class="md-nav__button md-logo" aria-label="cpp_robotics" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M320 0c17.7 0 32 14.3 32 32v64h120c39.8 0 72 32.2 72 72v272c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72h120V32c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zM264 256a40 40 0 1 0-80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224h16v192H48c-26.5 0-48-21.5-48-48v-96c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48h-16V224h16z"/></svg>

    </a>
    cpp_robotics
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Kotakku/cpp_robotics" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Kotakku/cpp_robotics
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    概要
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="/cpp_robotics/doxybook/Namespaces/namespacecpp__robotics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    プログラム例
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            プログラム例
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../example/hello_world/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HelloWorld
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    制御
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            制御
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../example/control/lqr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LQR
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../example/control/canonicalize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    正準形
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../example/control/place/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    極配置
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../example/control/vrft_pid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VRFTによるPIDゲインの自動チューニング
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    最適化
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            最適化
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../example/optimize/optimize_scalar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    スカラー関数の最適化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../example/optimize/optimize_without_constraint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    無制約最適化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../example/optimize/optimize_rosenbrock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rosenbrock関数の最適化
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    システム
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            システム
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../example/system/step_responce/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    伝達関数のステップ応答
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../example/system/bode_nyquist/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ボード線図・ナイキスト線図
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../example/system/state_space_system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    状態空間表現
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    パスプランニング
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            パスプランニング
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../example/path_planning/dubins_path/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dubins曲線
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    技術資料
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            技術資料
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    システムモデル
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            システムモデル
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/transfer_function/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    伝達関数
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/state_space_system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    状態空間表現
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/discrete/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    離散化
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    制御
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            制御
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../control/pid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PID
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../control/pid2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2自由度PID
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../control/lqr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LQR
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../control/place/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    極配置による状態フィードバック
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../control/frit_vrft_turning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FRIT,VRFTによるゲインチューニング
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    最適制御
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            最適制御
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimal_control/optimal_control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    最適制御
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimal_control/mpc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    モデル予測制御(MPC)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    運動学
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            運動学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kinematics/diff_robot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    差動二輪機構
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kinematics/mecanum/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    メカナム移動機構
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kinematics/omni/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    オムニ移動機構
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kinematics/swerve/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    独立4輪ステア移動機構
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    フィルタ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            フィルタ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filter/tf_filter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    伝達関数で表現されるフィルタ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filter/kalman_filter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    カルマンフィルタ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" checked>
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    パスプランニング・パストラッキング
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            パスプランニング・パストラッキング
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dubins_path/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dubins曲線
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    スプライン曲線
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    スプライン曲線
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      補間曲線の種類
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bezier" class="md-nav__link">
    <span class="md-ellipsis">
      Bezier曲線
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bezier曲線">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#n" class="md-nav__link">
    <span class="md-ellipsis">
      N次ベジエ曲線
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      バーンスタイン基底関数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hermite" class="md-nav__link">
    <span class="md-ellipsis">
      Hermite曲線
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#catmull-rom" class="md-nav__link">
    <span class="md-ellipsis">
      Catmull-Rom曲線
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Catmull-Rom曲線">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tension" class="md-nav__link">
    <span class="md-ellipsis">
      tensionについて
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      パラメータ区分について
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cubic-spline" class="md-nav__link">
    <span class="md-ellipsis">
      Cubic-Spline曲線
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hermitebezier" class="md-nav__link">
    <span class="md-ellipsis">
      Hermite曲線のパラメータからBezier曲線のパラメータを求める
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#catmull-rombezier" class="md-nav__link">
    <span class="md-ellipsis">
      Catmull-Rom曲線のパラメータからBezier曲線のパラメータを求める
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bezier_1" class="md-nav__link">
    <span class="md-ellipsis">
      任意の三次方程式からBezier曲線のパラメータを求める
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      位置・速度・加速度
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#de-casteljaubezier" class="md-nav__link">
    <span class="md-ellipsis">
      De Casteljau法によるBezier曲線の分割
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      曲線の長さ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="曲線の長さ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      大体の長さを求めてみる
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      許容誤差の情報を使って解像度を最適化する
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      区間を指定して長さを求める
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      数値的に速度を1にする
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      曲率
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#todo" class="md-nav__link">
    <span class="md-ellipsis">
      (Todo)任意の座標から一番近い曲線上の点を出す
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      円弧近似
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      特殊な条件での円弧近似(式変形)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      参考文献
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    アルゴリズム
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            アルゴリズム
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithm/poly_lerp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    多項式補間
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithm/mahalanobis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    マハラノビス距離
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    最適化
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            最適化
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimize/algo_abst/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    アルゴリズムの概要
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimize/prob_and_algo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数理計画問題とアルゴリズム一覧
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimize/derivative/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数値微分
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimize/line_search/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    直線探索
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8_5" >
        
          
          <label class="md-nav__link" for="__nav_4_8_5" id="__nav_4_8_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    無制約最適化
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_8_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8_5">
            <span class="md-nav__icon md-icon"></span>
            無制約最適化
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimize/conj_grad/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    最急降下法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimize/newton/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ニュートン法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimize/quasi_newton/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    準ニュートン法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimize/benchmark_cont/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ベンチマーク
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8_6" >
        
          
          <label class="md-nav__link" for="__nav_4_8_6" id="__nav_4_8_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    制約付き最適化
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_8_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8_6">
            <span class="md-nav__icon md-icon"></span>
            制約付き最適化
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimize/kkt_condition/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KKT条件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimize/quadprog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    二次計画法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimize/interior_method/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内点法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimize/sqp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SQP(逐次二次計画法)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimize/least_squares_method/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    最小二乗法
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimize/tolerances_and_stopping/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    最適化の収束判定
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
        
          
          <label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    モーター
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            モーター
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../motor/motor_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    モーターの状態空間表現
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../motor/mabuchi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    マブチモータのスペック読み取り
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10" >
        
          
          <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ソフトウェア設計
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            ソフトウェア設計
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software_design/solid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SOLID原則
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="_1">スプライン曲線</h1>
<h2 id="_2">補間曲線の種類</h2>
<p>ロボットの移動やアクチュエータの軌道を作ろうとした時にいくつかの通過点だけを指定して曲線的に補間させて軌道を生成する。補間曲線として以下のようなものがある </p>
<ul>
<li>Bezier曲線(ベジエ曲線)</li>
<li>Hermite曲線(エルミート曲線)</li>
<li>Catmull-Rom曲線(キャットムル-ロム曲線?)</li>
<li>Cubic-Spline曲線(3次スプライン曲線)</li>
</ul>
<p>この記事では二次元平面上での曲線について述べていく</p>
<h2 id="bezier">Bezier曲線</h2>
<p>N個の制御点を使って曲線を作る特徴として </p>
<ul>
<li>一般に0点目, N-1点目しか通過しない</li>
</ul>
<p>よって二点間の補間と捉えてもほとんど間違いないだろう</p>
<h3 id="n">N次ベジエ曲線</h3>
<p>N個の制御点からなるベジエ曲線であるN次ベジエ曲線は次式で表される</p>
<div class="arithmatex">\[
P(t) =\sum_{i = 0}^{N-1}B_i J_{N-1, i}(t)
\]</div>
<p>ここで <span class="arithmatex">\(Bn\)</span>: 制御点の二次元座標(<span class="arithmatex">\(n\)</span> = 0, 1⋯<span class="arithmatex">\(N\)</span> − 1) <span class="arithmatex">\(JN\)</span> − 1, <span class="arithmatex">\(i\)</span>(<span class="arithmatex">\(t\)</span>): バーンスタイン基底関数</p>
<h3 id="_3">バーンスタイン基底関数</h3>
<div class="arithmatex">\[
J_{n, i}(t) = \left(\begin{array}{c}n\\i\end{array} \right)t^i(1-t)^{n-i}
\]</div>
<p>ここで二項係数</p>
<div class="arithmatex">\[
\left(\begin{array}{c}n\\i\end{array} \right) = \frac{n!}{i!(n-i)!}
\]</div>
<p>二項係数がぱっと出てこないときは<a href="https://www.google.com/search?q=%E3%83%91%E3%82%B9%E3%82%AB%E3%83%AB%E3%81%AE%E4%B8%89%E8%A7%92%E5%BD%A2">パスカルの三角形</a>を考えると早いかもしれない。<span class="arithmatex">\(n\)</span>と<span class="arithmatex">\(i\)</span>が与えられたとき上から<em>n</em>+1段目の(左から)<em>i</em> + 1個目が係数になる</p>
<p>他の曲線との比較のためにN=4とすることが多いのでN=4について書き下すと係数は</p>
<div class="arithmatex">\[
\begin{array}{l}
J_{3, 0}(t) = (1-t)^3\\
J_{3, 1}(t) = 3(1-t)^2t\\
J_{3, 2}(t) = 3(1-t)t^2\\
J_{3, 3}(t) = t^3
\end{array}
\]</div>
<p>よってベジエ曲線</p>
<div class="arithmatex">\[
P(t)=(1-t)^3 B_0 +  3(1-t)^2t B_1 +  3(1-t)t^2 B_2 + t^3 B_3 \quad \quad t \in [0, 1]
\]</div>
<h2 id="hermite">Hermite曲線</h2>
<p>ベジエ曲線と同様二点間の曲線補間法である。特徴として </p>
<ul>
<li>始点と終点の位置と速度ベクトルを指定する</li>
</ul>
<p>始点と終点の位置と速度をそれぞれ次のように置く <em>P</em>0, <em>P</em>1: 始点と終点の座標 <em>v</em>0, <em>v</em>1: 始点と終点の速度ベクトル (いずれも二次元のベクトルである)</p>
<p>3次式を以下のように置く</p>
<div class="arithmatex">\[
\begin{array}{l}
f_x(t) = a_x t^3 + b_x t^2 + c_x t + d_x\\
f_y(t) = a_y t^3 + b_y t^2 + c_y t + d_y \quad \quad t \in [0, 1]
\end{array}
\]</div>
<p>また<em>P</em>0等についても<em>P</em>0<em>x</em>, <em>P</em>0<em>y</em>が存在する</p>
<p>今、xとyについて操作は同じなのでここからは式を見やすくするためにxyの添字は省略する</p>
<p><em>f</em>(<em>t</em>)を微分すると</p>
<div class="arithmatex">\[
f(x) = at^3 + bt^2 + ct + d\\
f'(x) = 3at^2 + 2bt + c
\]</div>
<p>aからdを求めていく。 与えられたパラメータより  </p>
<div class="arithmatex">\[
\begin{array}{l}
f(0) = P_0\\
f(1) = P_1\\
f'(0) = v_0\\
f'(1) = v_1
\end{array}
\]</div>
<p>よってt=0に着目すると</p>
<div class="arithmatex">\[
d = P_0\\
c = v_0
\]</div>
<p>またt=1において</p>
<div class="arithmatex">\[
\begin{array}{l}
f(1) = a + b + c + d = P_1 より\\
c = v_0, d=P_0を代入して\\
a + b = P_1 - P_0 - v_0\\
\\
f'(1) = 3a + 2b + c = v_1 より\\
c = v_0を代入して\\
3a + 2b = v_1 - v_0
\end{array}
\]</div>
<p>それぞれの式を①,②として②−2×①でaを求めてからbについても解くと</p>
<div class="arithmatex">\[
a = 2P_0 - 2P_1 + v_0 + v_1\\
b = -3P_0 + 3P_1 - 2v_0 - v_1
\]</div>
<p>よって</p>
<div class="arithmatex">\[
\begin{array}{l}
a = 2P_0 - 2P_1 + v_0 + v_1\\
b = -3P_0 + 3P_1 - 2v_0 - v_1\\
c = v_0\\
d = P_0
\end{array}
\]</div>
<p>a〜dをx,yそれぞれについて求めて<em>fx</em>(<em>t</em>),<em>fy</em>(<em>t</em>)に代入することでHermite曲線を描画できる</p>
<p>メモ書きとして残しておくがtの次数ではなく<em>P</em>0, <em>P</em>1, <em>v</em>0, <em>v</em>1についてくくると以下のようになる</p>
<div class="arithmatex">\[
\begin{array}{l}
f(t) = \\
(2t^3 - 3t^2 + 1)P_0\\
(-2t^3 + 3t^2)P_1\\
(t^3 -2t^2 + t)v_0\\
(t^3 - t^2)v_1\\
\end{array}
\]</div>
<h2 id="catmull-rom">Catmull-Rom曲線</h2>
<p>実際問題二点間の補間だけだと足りないことが多いと思う そこでHermite曲線をつなげて作られるCatmull-Rom曲線を考える。特徴は </p>
<ul>
<li>N個(N &gt; 1)の点をすべて通過する曲線を作れる</li>
<li>Herimite曲線で使った速度ベクトルを必要としない</li>
</ul>
<p>(本当はHermite曲線とは別にCatmull-曲線ができて同じ3次式だから変換できるよね、の流れな気がするけど文献を見つけられなかった)</p>
<p>i番目の終点をi+1番目の始点にすることで繋がった曲線にはなるが滑らかに繋がった曲線にするための拘束が必要になる</p>
<p>N点からなる曲線のうち端点以外の補間について考える i番目の点における速度を両隣の座標から作ることで滑らかにつなぐ</p>
<div class="arithmatex">\[
v_i = \frac{1}{2}(P_{i+1} - P_{i-1})
\]</div>
<p>曲線の端点(<em>i</em> = 0, <em>N</em> − 1)ではこの式が使えないので自身の座標と隣の座標で速度ベクトルを作る</p>
<div class="arithmatex">\[
\begin{array}{l}
v_0 = P_1 - P_0\\
v_{N-1} = P_{N-1} - P_{N-2}
\end{array}
\]</div>
<h3 id="tension">tensionについて</h3>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Todo</p>
</div>
<h3 id="_4">パラメータ区分について</h3>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Todo</p>
</div>
<h2 id="cubic-spline">Cubic-Spline曲線</h2>
<p>自分が高専ロボコンで参照軌道はこのスプライン曲線だった。</p>
<p>特徴として </p>
<ul>
<li>入力はCatmull-Romと同じ通過点のみだがより滑らかである</li>
<li>(もしかしたら少し重い?)</li>
</ul>
<p>3次スプライン曲線では以下の条件に従うような曲線を方程式を解くことによって求める</p>
<div class="arithmatex">\[
\begin{array}{l}
S_j(x_j) = y_j\\
S_j(x_{j+1}) = S_{j+1}(x_{j+1}) = y_{j+1}\\
S'_j(x_{j+1}) = S'_{j+1}(x_{j+1})\\
S''_j(x_{j+1}) = S''_{j+1}(x_{j+1})\\
S'_0(x_{0}) = S'_{n-1}(x_{n}) = 0
\end{array}
\]</div>
<p>これらは</p>
<ul>
<li>多項式<em>S</em>に<em>x</em>を入力すると<em>y</em>を出力する</li>
<li>多項式<em>S</em>のが繋がっていて制御点を通る</li>
<li>区間のつなぎ目で速度が連続である</li>
<li>区間のつなぎ目で加速度が連続である</li>
<li>端点では加速度は0である ことを示す。</li>
</ul>
<h2 id="hermitebezier">Hermite曲線のパラメータからBezier曲線のパラメータを求める</h2>
<p>ベジエ曲線は入力パラメータとして通過しない座標を与えるためパラメータから曲線を想像しづらいためエルミート曲線の入力パラメータから4次ベジエ曲線のパラメータを求める実装がされているコードを見かけることがある。その実装の導出をしていく。</p>
<p>まずそれぞれのパラメータを Bezier曲線: <em>B</em>0, <em>B</em>1, <em>B</em>2, <em>B</em>3(制御点) Hermite曲線: <em>P</em>0, <em>P</em>1, <em>v</em>0, <em>v</em>1(始点と終点の座標と速度ベクトル) とする。</p>
<p>次にそれぞれ式を書き下し、tの次数ごとに括ると</p>
<div class="arithmatex">\[
\begin{array}{l}
P_{bezier}(t) = \\
(-B_0 + 3 B_1 -3 B_2 + B_3)t^3 +\\
(3 B_0 -6 B_1 + 3 B_2)t^2 + \\
(-3 B_0 + 3 B_1)t^1 +\\
(B_0)t^0\\
\end{array}
\]</div>
<div class="arithmatex">\[
\begin{array}{l}
P_{herimite}(t) = \\
(2 P _0 - 2 P_1 + v_0 + v_1)t^3\\
(-3 P_0 + 3 P_1 -2 v_0  - v_1)t^2\\
(v_0)t^1\\
(P_0)t^0
\end{array}
\]</div>
<p><em>Pbezier</em>(<em>t</em>) = <em>Pherimite</em>(<em>t</em>)として恒等式を解くと (<em>t</em>0について)</p>
<div class="arithmatex">\[
B_0 = P_0
\]</div>
<p>(<em>t</em>1について)</p>
<div class="arithmatex">\[
v_0 = -3 B_0 + 3 B_1\\
B_1 = P_0 + \frac{1}{3}v_0
\]</div>
<p>(<em>t</em>2について)</p>
<div class="arithmatex">\[
-3 P_0 + 3 P_1 -2 v_0  - v_1 = 3 P_0 -6(P_0 + \frac{1}{3} v_0) + 3 B_2\\
B_2 = P_1 - \frac{1}{3} v_1
\]</div>
<p>(<em>t</em>3について)</p>
<div class="arithmatex">\[
2 P _0 - 2 P_1 + v_0 + v_1 = - P_0 + 3(P_0 + \frac{1}{3}v_0) - 3(P_1 - \frac{1}{3}v_1) + B_3\\
B_3 = P_1
\]</div>
<p>よって</p>
<div class="arithmatex">\[
\begin{array}{l}
B_0 = P_0\\  
B_1 = P_0 + \frac{1}{3}v_0\\
B_2 = P_1 - \frac{1}{3} v_1\\
B_3 = P_1
\end{array}
\]</div>
<p>とするとHermite曲線の入力をBezier曲線で扱うことができる。 実装するに当たって</p>
<div class="arithmatex">\[
\begin{array}{l}
BP_1 = P_0 + \frac{1}{3}v_0\\
BP_2 = P_1 - \frac{1}{3} v_1
\end{array}
\]</div>
<p>と一時変数を宣言していることもある</p>
<h2 id="catmull-rombezier">Catmull-Rom曲線のパラメータからBezier曲線のパラメータを求める</h2>
<p>Hermite曲線のパラメータとして求めていれば代入するだけ</p>
<div class="arithmatex">\[
\begin{array}{l}
BP_1 = P_i + \frac{1}{6}(P_{i+1} - P_{i-1})\\
BP_2 = P_{i+1} - \frac{1}{6} (P_{i+2} - P_{i})
\end{array}
\]</div>
<p>i=0のとき</p>
<div class="arithmatex">\[
\begin{array}{l}
BP_1 = P_0 + \frac{1}{3}(P_1 - P_0)\\
BP_2 = P_{i+1} - \frac{1}{6} (P_{i+2} - P_{i}) (変わらず)
\end{array}
\]</div>
<p>i = N-1のとき</p>
<div class="arithmatex">\[
\begin{array}{l}
BP_1 = P_i + \frac{1}{6}(P_{i+1} - P_{i-1})  (変わらず)\\
BP_2 = P_{N-1} - \frac{1}{3} (P_{N-1} - P_{N-2})
\end{array}
\]</div>
<h2 id="bezier_1">任意の三次方程式からBezier曲線のパラメータを求める</h2>
<p>任意の三次方程式</p>
<div class="arithmatex">\[
f(t) = a t^3 + b t^2 + c t + d
\]</div>
<p>についてBezier曲線と恒等式としてパラメータを求める(Hermite-&gt;Bezierの時と同じ)</p>
<div class="arithmatex">\[
\begin{array}{l}
P_{bezier}(t) = \\
(-B_0 + 3 B_1 -3 B_2 + B_3)t^3 +\\
(3 B_0 -6 B_1 + 3 B_2)t^2 + \\
(-3 B_0 + 3 B_1)t^1 +\\
(B_0)t^0\\
\end{array}
\]</div>
<p>よって</p>
<div class="arithmatex">\[
\begin{array}{l}
a = B_0 + 3 B_1 -3 B_2 + B_3\\
b = 3 B_0 -6 B_1 + 3 B_2\\
c = -3 B_0 + 3 B_1\\
d = B_0
\end{array}
\]</div>
<p>これを解くと</p>
<div class="arithmatex">\[
\begin{array}{l}
B_0 = d\\
B_1 = d + \frac{1}{3}c\\
B_2 = \frac{1}{3}b + \frac{2}{3}c + d\\
B_3 = a + b + c + d
\end{array}
\]</div>
<h2 id="_5">位置・速度・加速度</h2>
<p>Bezier曲線の定義よりパラメータとバーンスタイン基底関数による重みをそれぞれ</p>
<div class="arithmatex">\[
B = \left[B_0, B_1, B_2, B_3\right]
\]</div>
<div class="arithmatex">\[
W = \left[
\begin{array}{c}
-t^3 + 3t^2 - 3t + 1\\
3t^3 -6 t^2 +3 t\\
-3 t^3 + t^2\\
t^3
\end{array}
\right]
\]</div>
<p>とベクトル表記した場合、位置は次式で表すことができる。</p>
<div class="arithmatex">\[
P(t) = B \cdot W
\]</div>
<p>ここで<em>W</em>を係数と<em>tn</em>に分解すると次のようになる</p>
<div class="arithmatex">\[
W = W_m T =  
\left [\begin{array}{c}
-1 &amp; 3 &amp; -3 &amp; 1\\
3 &amp; -6 &amp; 3 &amp; 0\\
-3 &amp; 1 &amp; 0 &amp; 0\\
1 &amp; 0 &amp; 0 &amp; 0
\end{array}
\right ]
\left [\begin{array}{c}
t^3\\
t^2\\
t\\
1
\end{array}
\right ]
\]</div>
<p>これを使うと位置の式は次のように表すことができる</p>
<div class="arithmatex">\[
P(t) = B  W_m T =
\left[B_0, B_1, B_2, B_3\right]
\left [\begin{array}{c}
-1 &amp; 3 &amp; -3 &amp; 1\\
3 &amp; -6 &amp; 3 &amp; 0\\
-3 &amp; 1 &amp; 0 &amp; 0\\
1 &amp; 0 &amp; 0 &amp; 0
\end{array}
\right ]
\left [\begin{array}{c}
t^3\\
t^2\\
t\\
1
\end{array}
\right ]
\]</div>
<p><em>T</em>の要素を<em>t</em>で1回微分、2回微分してすることで速度、加速度も表現可能である 速度を得たい場合</p>
<div class="arithmatex">\[
T = 
\left [\begin{array}{c}
3t^2\\
2t\\
1\\
0
\end{array}
\right ]
\]</div>
<p>加速度を得たい場合</p>
<div class="arithmatex">\[
T = 
\left [\begin{array}{c}
6t\\
2\\
0\\
0
\end{array}
\right ]
\]</div>
<h2 id="de-casteljaubezier">De Casteljau法によるBezier曲線の分割</h2>
<p>解析的に連続な関数として曲線が得られても実用上は直線近似して使うみたいなのは そんなとき媒介変数<em>t</em>で等分することをまず思いつくだろうが曲率が小さいところで無駄に分割されるかもしれないし、曲率が大きいところで分割が足りずに上手く曲線近似できないかもしれない。直線近似するためには曲率によって分割する区分の長さを変えたほうが近似度から考えると合理的だろう。</p>
<p>Bezier曲線</p>
<div class="arithmatex">\[
P(t) =\sum_{i = 0}^{N-1}B_i J_{N-1, i}(t) \quad \quad t \in [0, 1]
\]</div>
<p>を<em>t</em>0で2つの区間に分割する</p>
<div class="arithmatex">\[
P_0(t) = \sum_{i = 0}^{N-1}B_{0i} J_{N-1, i}\left(\frac{t}{t_0}\right) \quad \quad t \in [0, t_0]
\]</div>
<div class="arithmatex">\[
P_1(t) = \sum_{i = 0}^{N-1}B_{1i} J_{N-1, i}\left( \frac{t-t_0}{1-t_0} \right) \quad \quad t \in [t_0, 1]
\]</div>
<p>今、見やすさのために<em>n</em> = <em>N</em> − 1としておく</p>
<div class="arithmatex">\[
P_0(t) = \sum_{i = 0}^{n}B_{0i} J_{n, i}\left(\frac{t}{t_0}\right) \quad \quad t \in [0, t_0]
\]</div>
<div class="arithmatex">\[
P_1(t) = \sum_{i = 0}^{n}B_{1i} J_{n, i}\left( \frac{t-t_0}{1-t_0} \right) \quad \quad t \in [t_0, 1]
\]</div>
<p>このとき<em>B</em>0<em>n</em>, <em>B</em>1<em>n</em>の計算は以下のように再帰的に与えられる</p>
<div class="arithmatex">\[
\begin{array}{l}
B_i^{(0)} := B_i \quad \quad \quad i = 0, 1 \cdots n\\
B_i^{(j)} := B_i^{(j-1)}(1-t_0) + B_{i+1}^{(j-1)}t_0 i \quad \quad i = 0, 1 \cdots (n-j), \quad  j = 1, 2 \cdots n\\
\end{array}
\]</div>
<p>と定義したとき</p>
<div class="arithmatex">\[
\begin{array}{l}
B_{0n} = B_0^{(i)}\\
B_{1n}= B_i^{(n-1)}
\end{array}
\]</div>
<p><em>N</em> = 4について線形補間関数<em>lerp</em>(<em>a</em>, <em>b</em>, <em>t</em>)を定義した上で書き下してみる</p>
<div class="arithmatex">\[
lerp(a, b, t) := a(1-t) + bt \quad \quad t \in [0, 1]
\]</div>
<p>として分割前の係数<em>B</em> = [<em>B</em>0, <em>B</em>1, <em>B</em>2, <em>B</em>3],分割後の係数をそれぞれ<em>SB</em>0 = [<em>B</em>00, <em>B</em>01, <em>B</em>02, <em>B</em>03],<em>SB</em>1 = [<em>B</em>10, <em>B</em>11, <em>B</em>12, <em>B</em>13]として<em>t</em>0で<em>B</em>を分割すると</p>
<div class="arithmatex">\[
SB_0 = 
\left[ \begin{array}{l}
B_0\\
lerp(B_0, B_1, t_0)\\
lerp(lerp(B_0, B_1, t_0), lerp(B_1, B_2, t_0), t_0)\\
lerp(lerp(lerp(B_0, B_1, t_0), lerp(B_1, B_2, t_0), t_0), lerp(lerp(B_1, B_2, t_0), lerp(B_2, B_3, t_0), t_0), t_0)
\end{array} \right]
\]</div>
<div class="arithmatex">\[
SB_1 = 
\left[ \begin{array}{l}
lerp(lerp(lerp(B_0, B_1, t_0), lerp(B_1, B_2, t_0), t_0), lerp(lerp(B_1, B_2, t_0), lerp(B_2, B_3, t_0), t_0), t_0)\\
lerp(lerp(B_1, B_2, t_0), lerp(B_2, B_3, t_0), t_0)\\
lerp(B_2, B_3, t_0)\\
B_3
\end{array} \right]
\]</div>
<h2 id="_6">曲線の長さ</h2>
<p>Bezier曲線の長さを求める方法について考えてみる Bezier曲線でない曲線についてはBezier曲線に変換できるのでここでは考えないものとする</p>
<h3 id="_7">大体の長さを求めてみる</h3>
<p>厳密に考えずにある程度の長さを求めることを考える 下の図よりベジエ曲線の長さは大雑把に見ても|<em>P</em>3−<em>P</em>0|以上で|<em>P</em>1−<em>P</em>0| + |<em>P</em>2−<em>P</em>1| + |<em>P</em>3−<em>P</em>2|以下であることが見て取れるだろう</p>
<p><img alt="https://img.esa.io/uploads/production/attachments/7911/2021/01/09/35899/a0e2c763-b83c-47c0-a3e2-26e4607b14db.png" src="https://img.esa.io/uploads/production/attachments/7911/2021/01/09/35899/a0e2c763-b83c-47c0-a3e2-26e4607b14db.png" /></p>
<p>(出典：<a href="http://nakayasu.com/lecture/%E3%83%99%E3%82%B8%E3%82%A7%E6%9B%B2%E7%B7%9A%E7%89%B9%E8%A8%93/7881">1.ベジエ曲線とは</a>)</p>
<p>今<em>MinLength</em>と<em>MaxLength</em>を次のように定義する</p>
<div class="arithmatex">\[
\begin{aligned}
MinLnegth &amp;= |P_3-P_0|\\
&amp;= \sqrt{(P_{3x}-P_{0x})^2 + (P_{3y}-P_{0y})^2}\\
MaxLength &amp;= |P_1-P_0| + |P_2-P_1| + |P_3-P_2|\\
&amp;= \sqrt{(P_{1x}-P_{0x})^2 + (P_{1y}-P_{0y})^2} + 
\sqrt{(P_{2x}-P_{1x})^2 + (P_{2y}-P_{1y})^2} +
\sqrt{(P_{3x}-P_{2x})^2 + (P_{3y}-P_{2y})^2}
\end{aligned}
\]</div>
<p>(<em>Pn</em>は前項まで<em>Bn</em>と記述していたけど画像を作るのが面倒くさくて持ってきたのに合わせただけなので誤解しないでね)</p>
<p>この平均を大体の長さとして定義する</p>
<div class="arithmatex">\[
EstimateLength = \frac{MinLength + MaxLength}{2}
\]</div>
<p>すると誤差は大きくても差の半分である</p>
<div class="arithmatex">\[
MaxError = \frac{MaxLength - MinLength}{2}
\]</div>
<h3 id="_8">許容誤差の情報を使って解像度を最適化する</h3>
<p>上記の方法で「大体の」長さが求まる。<em>MaxError</em>の値が大きければ曲線の前述の方法で分解してそれぞれについて大体の長さを求める再帰的な処理になるだろう。ここで注意するのは<em>MaxError</em>はあくまで<em>MinLength</em>と<em>MaxLength</em>から見た誤差の最大で精度がほしいからと言って<em>MaxError</em>が0.001を下回るまで分割し続けるなんて必要はない。検証はしてないが0.1、小さくても0.05を下回っていれば十分な精度を得られると思う。</p>
<h3 id="_9">区間を指定して長さを求める</h3>
<p>上で求めた長さは<em>t</em>が0から1までの長さと捉えることができる。任意の<em>t</em>の区間における長さについて拡張するには区間の分割を活用する</p>
<p><em>t</em>0から<em>t</em>1の範囲の長さを求めるとき <em>t</em>0 = 0のとき -&gt; <em>t</em>1で分割した前半の長さを出す <em>t</em>1 = 1のとき -&gt; <em>t</em>0で分割して後半の長さを出す それ以外のとき -&gt; 分割を二回行って区間を出してから長さを出す</p>
<h2 id="1">数値的に速度を1にする</h2>
<p>媒介変数<em>t</em>を用いて<em>t</em>を動かしたときに曲線の上を移動する点の速度は一定ではない。Catmull-Rom曲線やCubic-Spline曲線では速度を指定しないため速度について考えにくい。 速度を線形化するような関数を定義して媒介変数として曲線の関数に渡すことになるがこの関数は解析的に求めるのはできない(と思う)ので数値的に実装する方法をとる</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Todo</p>
</div>
<h2 id="_10">曲率</h2>
<p>詳細は省略するが忘れがちなので書いておく</p>
<p>曲率<em>κ</em>と曲率半径<em>R</em>の関係</p>
<div class="arithmatex">\[
\kappa = \frac{1}{R}
\]</div>
<p>速度ベクトル<em>v</em>と加速度ベクトル<em>a</em>が与えられたとき</p>
<div class="arithmatex">\[
R = \frac{|v|^3}{|v\times a|}
\]</div>
<h2 id="todo">(Todo)任意の座標から一番近い曲線上の点を出す</h2>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Todo</p>
</div>
<h2 id="_11">円弧近似</h2>
<p>円周上の二点が与えられたとき、その二点を結ぶ円弧をHermite曲線で近似するためのパラメータを考える。</p>
<p>前提条件として</p>
<ul>
<li>二点は一つの円周上にある</li>
</ul>
<p>Hermite曲線のパラメータ<span class="arithmatex">\(P_0\)</span>, <span class="arithmatex">\(P_1\)</span>, <span class="arithmatex">\(v_0\)</span>, <span class="arithmatex">\(v_1\)</span>のうち<span class="arithmatex">\(P_0\)</span>, <span class="arithmatex">\(P_1\)</span>は与えられた二点、<span class="arithmatex">\(v_0\)</span>, <span class="arithmatex">\(v_1\)</span>の方向は円に正接で大きさは以下で近似される</p>
<div class="arithmatex">\[
\kappa = \frac{4}{3\sqrt{r}}tan\frac{\theta}{4}
\]</div>
<p>ここで<span class="arithmatex">\(\theta\)</span>は円弧の角度、<span class="arithmatex">\(r\)</span>は円の半径</p>
<p>またこの近似は<span class="arithmatex">\(\theta &lt; \pi\)</span>のときに有効でありそれ以上では著しく円弧から離れてしまうため注意が必要</p>
<h2 id="_12">特殊な条件での円弧近似(式変形)</h2>
<p>既知のパラメータ</p>
<ul>
<li><span class="arithmatex">\(r\)</span></li>
<li><span class="arithmatex">\(P_0\)</span>, <span class="arithmatex">\(P_1\)</span></li>
<li><span class="arithmatex">\(v_0\)</span>, <span class="arithmatex">\(v_1\)</span>の方向</li>
</ul>
<div class="arithmatex">\[
cos\theta = \frac{v_0 \cdot v_1}{|v_0| |v_1|}
\]</div>
<p>半角公式</p>
<div class="arithmatex">\[
cos\theta = \sqrt{\frac{1+cos\theta}{2}}
\]</div>
<p>半角公式</p>
<div class="arithmatex">\[
\tan\frac{\theta}{4} = \sqrt{ \frac{1-\cos{ \frac{\theta}{2}}}{1+\cos{\frac{\theta}{2}}}  }
\]</div>
<div class="arithmatex">\[
\kappa = \frac{4}{3\sqrt{r}}tan\frac{\theta}{4}
\]</div>
<h2 id="_13">参考文献</h2>
<ul>
<li><a href="https://ja.wikipedia.org/wiki/%E3%83%99%E3%82%B8%E3%82%A7%E6%9B%B2%E7%B7%9A">ベジェ曲線</a></li>
<li><a href="https://qiita.com/Pctg-x8/items/47127a770b23b8934fff">ゲームプログラマのためのパラメトリック曲線入門(Hermite Curve)</a></li>
<li><a href="https://t-pot.com/program/2_3rdcurve/index.html">t-pot『3次曲線』</a></li>
<li><a href="http://research.nii.ac.jp/~takayama/teaching/utokyo-iscg-2019/slides/iscg-2019-modeling1.pdf">コンピュータグラフィクス論</a></li>
<li><a href="http://www5d.biglobe.ne.jp/stssk/maze/spline.html">簡略化した3次スプライン曲線の生成方法</a></li>
<li><a href="https://myenigma.hatenablog.com/entry/2016/10/12/073335">３次スプライン補間の概要とC++, Pythonサンプルコード</a></li>
<li>
<p><a href="https://en.wikipedia.org/wiki/De_Casteljau%27s_algorithm">De Casteljau’s algorithm</a></p>
</li>
<li>
<p><a href="https://cat-in-136.github.io/2014/03/bezier-4-diff.html">ベジェ曲線で描く円弧と本物の円弧の差（中心角について一般化）</a></p>
</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 - Takumi Odashima
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "toc.integrate", "navigation.instant"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version": "\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>